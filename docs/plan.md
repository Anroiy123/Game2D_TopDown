# ğŸ“‹ Káº¾ HOáº CH PHÃT TRIá»‚N GAME: "GAME THANH HÃ“A"

## ğŸ“Š Tá»”NG QUAN PHÃ‚N TÃCH

### Cá»‘t truyá»‡n chÃ­nh:

- **NhÃ¢n váº­t chÃ­nh**: Äá»©c - há»c sinh chuyá»ƒn trÆ°á»ng, nhÃºt nhÃ¡t, Wibu, dá»… bá»‹ báº¯t náº¡t
- **Chá»§ Ä‘á»**: Báº¡o lá»±c há»c Ä‘Æ°á»ng
- **3 Giai Ä‘oáº¡n**: Nhá»¯ng ngÃ y Ä‘áº§u â†’ Leo thang â†’ Cao trÃ o & Káº¿t thÃºc
- **4 Endings**: 1 Good, 1 True, 2 Bad

### TÃ i nguyÃªn hiá»‡n cÃ³:

| Loáº¡i                  | CÃ³ sáºµn      | Ghi chÃº                                                 |
| --------------------- | ----------- | ------------------------------------------------------- |
| **Character sprites** | âœ… 4 bá»™     | Alex, Amelia, Bob, Adam (16x16)                         |
| **Classroom assets**  | âœ… Äáº§y Ä‘á»§   | Lá»›p há»c, phÃ²ng mÃ¡y, cafeteria, toilet, Principal Office |
| **Home assets**       | âš ï¸ Má»™t pháº§n | `Interiors_free_16x16`, `Room_Builder_free_16x16`       |
| **Street assets**     | âŒ ChÆ°a cÃ³  | Cáº§n tÃ¬m thÃªm                                            |

---

## ğŸ—ºï¸ Káº¾ HOáº CH MAP (3 Bá»I Cáº¢NH)

### **MAP 1: NHÃ€ Äá»¨C (HomeScene)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ HomeScene - NhÃ  cá»§a Äá»©c                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PhÃ²ng:                                                         â”‚
â”‚  â”œâ”€â”€ ğŸ›ï¸ PhÃ²ng ngá»§ Äá»©c (SÃ¡ng sá»›m - scene má»Ÿ Ä‘áº§u game)           â”‚
â”‚  â”‚   â”œâ”€â”€ GiÆ°á»ng, bÃ n há»c, mÃ¡y tÃ­nh (cÃ y game)                  â”‚
â”‚  â”‚   â””â”€â”€ Poster anime/wibu                                      â”‚
â”‚  â”œâ”€â”€ ğŸ  PhÃ²ng khÃ¡ch (NÆ¡i máº¹ Ä‘á»©ng Ä‘á»£i)                          â”‚
â”‚  â”‚   â”œâ”€â”€ Tivi (hiá»ƒn thá»‹ tin tá»©c báº¡o lá»±c há»c Ä‘Æ°á»ng)             â”‚
â”‚  â”‚   â””â”€â”€ Cá»­a ra Ä‘Æ°á»ng (Door â†’ StreetScene)                     â”‚
â”‚  â””â”€â”€ ğŸ³ Báº¿p (Optional)                                          â”‚
â”‚                                                                 â”‚
â”‚  NPCs:                                                          â”‚
â”‚  â”œâ”€â”€ ğŸ‘© Máº¹ Äá»©c (há»i thÄƒm, nháº¯c nhá»Ÿ)                            â”‚
â”‚  â””â”€â”€ ğŸ‘¨ Bá»‘ Äá»©c (xuáº¥t hiá»‡n trong True Ending)                   â”‚
â”‚                                                                 â”‚
â”‚  Assets sá»­ dá»¥ng:                                                â”‚
â”‚  â”œâ”€â”€ Room_Builder_free_16x16.png (ná»n, tÆ°á»ng)                  â”‚
â”‚  â”œâ”€â”€ Interiors_free_16x16.png (ná»™i tháº¥t)                       â”‚
â”‚  â””â”€â”€ InteriorTilesLITE.png (bá»• sung)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **MAP 2: Lá»šP Há»ŒC (ClassroomScene) - ÄÃƒ CÃ“**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ ClassroomScene - TrÆ°á»ng há»c                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Khu vá»±c:                                                       â”‚
â”‚  â”œâ”€â”€ ğŸ« Lá»›p há»c chÃ­nh (hiá»‡n cÃ³)                                â”‚
â”‚  â”‚   â”œâ”€â”€ BÃ n gháº¿, báº£ng, cÃ´ giÃ¡o                                â”‚
â”‚  â”‚   â””â”€â”€ Báº¡n káº¿ bÃ n (rá»§ Ä‘i chÆ¡i)                               â”‚
â”‚  â”œâ”€â”€ ğŸšª PhÃ²ng giÃ¡o viÃªn (Principal Office assets)              â”‚
â”‚  â”‚   â””â”€â”€ CÃ´ giÃ¡o nÃ³i chuyá»‡n riÃªng vá»›i Äá»©c                      â”‚
â”‚  â”œâ”€â”€ ğŸƒ SÃ¢n trÆ°á»ng (Optional - nÆ¡i báº¡n bÃ¨ rá»§ chÆ¡i bÃ³ng)        â”‚
â”‚  â””â”€â”€ ğŸš» Toilet (Optional - nÆ¡i bá»‹ cháº·n)                        â”‚
â”‚                                                                 â”‚
â”‚  NPCs:                                                          â”‚
â”‚  â”œâ”€â”€ ğŸ‘©â€ğŸ« CÃ´ giÃ¡o (chá»§ nhiá»‡m, khuyÃªn nhá»§)                       â”‚
â”‚  â”œâ”€â”€ ğŸ§‘ Báº¡n káº¿ bÃ n (thÃ¢n thiá»‡n, rá»§ Ä‘i chÆ¡i)                    â”‚
â”‚  â””â”€â”€ ğŸ‘¥ CÃ¡c báº¡n khÃ¡c (background)                              â”‚
â”‚                                                                 â”‚
â”‚  Assets sá»­ dá»¥ng:                                                â”‚
â”‚  â”œâ”€â”€ 2dClassroomAssetPackByStyloo/Classroom/                   â”‚
â”‚  â”œâ”€â”€ 2dClassroomAssetPackByStyloo/Principal Office/            â”‚
â”‚  â””â”€â”€ 2dClassroomAssetPackByStyloo/Toilet/                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **MAP 3: ÄÆ¯á»œNG Vá»€ NHÃ€ (StreetScene)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ StreetScene - ÄÆ°á»ng Ä‘i há»c vá»                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Khu vá»±c:                                                       â”‚
â”‚  â”œâ”€â”€ ğŸ›£ï¸ Con Ä‘Æ°á»ng chÃ­nh (dÃ i, horizontal scrolling)           â”‚
â”‚  â”‚   â”œâ”€â”€ Äiá»ƒm A: Cá»•ng trÆ°á»ng (Door tá»« ClassroomScene)          â”‚
â”‚  â”‚   â”œâ”€â”€ Äiá»ƒm B: NÆ¡i báº¯t gáº·p nhÃ³m báº¯t náº¡t (BullyEncounter Zone)â”‚
â”‚  â”‚   â””â”€â”€ Äiá»ƒm C: Cá»•ng nhÃ  (Door â†’ HomeScene)                   â”‚
â”‚  â””â”€â”€ ğŸŒ³ Background: CÃ¢y cá»‘i, nhÃ  dÃ¢n, Ä‘Ã¨n Ä‘Æ°á»ng                â”‚
â”‚                                                                 â”‚
â”‚  NPCs:                                                          â”‚
â”‚  â”œâ”€â”€ ğŸ˜ˆ Tháº±ng cáº§m Ä‘áº§u (L) - Boss cá»§a nhÃ³m báº¯t náº¡t              â”‚
â”‚  â”œâ”€â”€ ğŸ‘¿ ÄÃ n em 1 (chuyÃªn dá»a náº¡t)                              â”‚
â”‚  â””â”€â”€ ğŸ‘¿ ÄÃ n em 2 (phá»¥ há»a)                                     â”‚
â”‚                                                                 â”‚
â”‚  Assets cáº§n tÃ¬m:                                                â”‚
â”‚  âš ï¸ Cáº§n download thÃªm street/outdoor tileset                   â”‚
â”‚  Gá»£i Ã½: "Modern City Tileset" hoáº·c tá»± váº½ Ä‘Æ¡n giáº£n              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¤ Káº¾ HOáº CH NHÃ‚N Váº¬T

### **DANH SÃCH NHÃ‚N Váº¬T Cáº¦N Táº O**

| #   | TÃªn                | Vai trÃ²                   | Sprite gá»£i Ã½                           | Animations cáº§n           |
| --- | ------------------ | ------------------------- | -------------------------------------- | ------------------------ |
| 1   | **Äá»©c** (Player)   | NhÃ¢n váº­t chÃ­nh, nhÃºt nhÃ¡t | `prototype_character` (customize)      | idle, walk, sit, bá»‹ Ä‘Ã¡nh |
| 2   | **Máº¹ Äá»©c**         | NPC nhÃ                    | `Amelia`                               | idle, walk               |
| 3   | **Bá»‘ Äá»©c**         | NPC nhÃ  (True Ending)     | `Bob`                                  | idle                     |
| 4   | **CÃ´ giÃ¡o**        | NPC trÆ°á»ng                | Cáº§n táº¡o má»›i (ná»¯, trang phá»¥c giÃ¡o viÃªn) | idle, walk               |
| 5   | **Báº¡n káº¿ bÃ n**     | NPC báº¡n bÃ¨, thÃ¢n thiá»‡n    | `Adam` (Ä‘Ã£ cÃ³)                         | idle, walk, sit          |
| 6   | **Tk cáº§m Ä‘áº§u (L)** | Antagonist chÃ­nh          | `prototype_character_red`              | idle, walk, Ä‘Ã¡nh         |
| 7   | **ÄÃ n em 1**       | Villain phá»¥               | Cáº§n sprite má»›i                         | idle, walk               |
| 8   | **ÄÃ n em 2**       | Villain phá»¥               | Cáº§n sprite má»›i                         | idle                     |

### **MAPPING SPRITE HIá»†N CÃ“**

```
Sprites/Characters/
â”œâ”€â”€ Alex/         â†’ CÃ³ thá»ƒ dÃ¹ng cho: Äá»©c (Player)
â”œâ”€â”€ Amelia/       â†’ CÃ³ thá»ƒ dÃ¹ng cho: Máº¹ Äá»©c, CÃ´ giÃ¡o
â”œâ”€â”€ Bob/          â†’ CÃ³ thá»ƒ dÃ¹ng cho: Bá»‘ Äá»©c
â”œâ”€â”€ adam/         â†’ ÄÃ£ dÃ¹ng: Báº¡n káº¿ bÃ n
â”œâ”€â”€ prototype_character.png       â†’ Backup cho Player
â”œâ”€â”€ prototype_character_red.png   â†’ Tk cáº§m Ä‘áº§u (L)
â””â”€â”€ prototype_character_blue.png  â†’ ÄÃ n em
```

---

## ğŸ’» Káº¾ HOáº CH SYSTEM

### **PRIORITY 1: Core Systems (Báº®T BUá»˜C)** âœ… HOÃ€N THÃ€NH

| #   | System                    | MÃ´ táº£                                       | Files                                          | Status |
| --- | ------------------------- | ------------------------------------------- | ---------------------------------------------- | ------ |
| 1   | **GameManager**           | Singleton quáº£n lÃ½ game state, scene loading | `GameManager.cs`                               | âœ…     |
| 2   | **StoryManager**          | Quáº£n lÃ½ story flags, variables              | `StoryManager.cs`, `SerializableDictionary.cs` | âœ…     |
| 3   | **SceneTransition**       | Door/Portal chuyá»ƒn scene                    | `SceneTransition.cs`, `SpawnPoint.cs`          | âœ…     |
| 4   | **Enhanced DialogueData** | ThÃªm conditions, portrait                   | `DialogueData.cs` (Ä‘Ã£ nÃ¢ng cáº¥p)                | âœ…     |
| 5   | **Save/Load System**      | LÆ°u tiáº¿n trÃ¬nh                              | `SaveManager.cs`, `SaveData.cs`                | âœ…     |

### **PRIORITY 2: Gameplay Systems (QUAN TRá»ŒNG)**

| #   | System             | MÃ´ táº£                           | Files cáº§n táº¡o                  |
| --- | ------------------ | ------------------------------- | ------------------------------ |
| 6   | **DaySystem**      | Quáº£n lÃ½ ngÃ y trong game         | `DayManager.cs`                |
| 7   | **ChoiceTracker**  | Äáº¿m lá»±a chá»n Ä‘á»ƒ xÃ¡c Ä‘á»‹nh ending | TÃ­ch há»£p vÃ o `StoryManager.cs` |
| 8   | **BullyEncounter** | Logic gáº·p nhÃ³m báº¯t náº¡t          | `BullyEncounterZone.cs`        |
| 9   | **MoneySystem**    | Tiá»n cá»§a Äá»©c (bá»‹ tráº¥n lá»™t)      | `PlayerInventory.cs`           |

### **PRIORITY 3: Polish Systems (NÃŠN CÃ“)**

| #   | System               | MÃ´ táº£                    | Files cáº§n táº¡o           |
| --- | -------------------- | ------------------------ | ----------------------- |
| 10  | **TVNewsDisplay**    | Hiá»ƒn thá»‹ tin tá»©c trÃªn TV | `TVController.cs`       |
| 11  | **FadeTransition**   | Hiá»‡u á»©ng chuyá»ƒn scene    | `SceneFader.cs`         |
| 12  | **TextNotification** | Hiá»‡n thÃ´ng Ä‘iá»‡p game     | `NotificationSystem.cs` |

---

## ğŸ“¦ Cáº¤U TRÃšC STORY FLAGS

```
StoryManager.storyFlags:
â”œâ”€â”€ day_1_completed: bool           â† HoÃ n thÃ nh ngÃ y 1
â”œâ”€â”€ day_2_completed: bool           â† HoÃ n thÃ nh tuáº§n 1
â”œâ”€â”€ met_bullies: bool               â† ÄÃ£ gáº·p nhÃ³m báº¯t náº¡t
â”œâ”€â”€ befriended_bullies: bool        â† ÄÃ£ "káº¿t báº¡n" vá»›i nhÃ³m báº¯t náº¡t (láº§n 1 Ä‘á»‘i máº·t)
â”œâ”€â”€ escaped_bullies_count: int      â† Sá»‘ láº§n bá» cháº¡y (0-3)
â”œâ”€â”€ got_beaten: bool                â† ÄÃ£ bá»‹ Ä‘Ã¡nh
â”œâ”€â”€ gave_money_count: int           â† Sá»‘ láº§n Ä‘Æ°a tiá»n
â”œâ”€â”€ talked_to_teacher: bool         â† ÄÃ£ nÃ³i chuyá»‡n vá»›i cÃ´ giÃ¡o
â”œâ”€â”€ invited_by_classmate: bool      â† ÄÆ°á»£c báº¡n rá»§ Ä‘i chÆ¡i
â”œâ”€â”€ rejected_classmate: bool        â† Tá»« chá»‘i báº¡n
â”œâ”€â”€ mom_worried: bool               â† Máº¹ lo láº¯ng
â”œâ”€â”€ confessed_to_mom: bool          â† ThÃº nháº­n vá»›i máº¹ (True Ending)
â”œâ”€â”€ brought_knife: bool             â† Mang dao (Bad Ending trigger)
â””â”€â”€ current_ending: string          â† "good"/"true"/"bad_murder"/"bad_death"

StoryManager.storyVariables:
â”œâ”€â”€ current_day: int                â† NgÃ y hiá»‡n táº¡i (1-14)
â”œâ”€â”€ money: int                      â† Tiá»n cÃ²n láº¡i
â”œâ”€â”€ fear_level: int                 â† Má»©c Ä‘á»™ sá»£ hÃ£i (0-100)
â””â”€â”€ relationship_classmate: int     â† Quan há»‡ vá»›i báº¡n káº¿ bÃ n
```

---

## ğŸ® FLOW GAME THEO Cá»T TRUYá»†N

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NGÃ€Y 1: NgÃ y Ä‘áº§u Ä‘i há»c                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  HomeScene (SÃ¡ng)                                                          â”‚
â”‚  â””â†’ Máº¹ Ä‘Ã¡nh thá»©c â†’ Äá»©c Äƒn sÃ¡ng â†’ Äi há»c                                   â”‚
â”‚       â†“                                                                    â”‚
â”‚  ClassroomScene                                                            â”‚
â”‚  â””â†’ CÃ´ giÃ¡o giá»›i thiá»‡u â†’ Äá»©c tá»± giá»›i thiá»‡u (nhÃºt nhÃ¡t) â†’ Báº¡n káº¿ bÃ n chÃ o  â”‚
â”‚       â†“                                                                    â”‚
â”‚  StreetScene (Chiá»u)                                                       â”‚
â”‚  â””â†’ Äá»©c Ä‘i vá» â†’ Gáº·p nhÃ³m báº¯t náº¡t Ä‘i theo                                  â”‚
â”‚       â†“                                                                    â”‚
â”‚  ğŸ”´ CHOICE 1: [Quay láº¡i há»i] / [Cháº¡y vá» nhÃ ]                              â”‚
â”‚       â†“                                                                    â”‚
â”‚  HomeScene (Tá»‘i)                                                           â”‚
â”‚  â””â†’ Máº¹ há»i thÄƒm â†’ Äá»©c phá»›t lá» lÃªn phÃ²ng                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ (1 tuáº§n trÃ´i qua - Fade to black)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NGÃ€Y 7: Má»™t tuáº§n sau                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ClassroomScene                                                            â”‚
â”‚  â””â†’ Báº¡n káº¿ bÃ n rá»§ Ä‘i chÆ¡i â†’ Äá»©c tá»« chá»‘i                                   â”‚
â”‚       â†“                                                                    â”‚
â”‚  ClassroomScene (PhÃ²ng giÃ¡o viÃªn)                                          â”‚
â”‚  â””â†’ CÃ´ giÃ¡o gá»i riÃªng, khuyÃªn nhá»§ káº¿t báº¡n                                 â”‚
â”‚       â†“                                                                    â”‚
â”‚  StreetScene (Chiá»u)                                                       â”‚
â”‚  â””â†’ NhÃ³m báº¯t náº¡t láº¡i xuáº¥t hiá»‡n                                            â”‚
â”‚       â†“                                                                    â”‚
â”‚  ğŸ”´ CHOICE 2: [Äá»‘i máº·t - "káº¿t báº¡n"] / [Bá» cháº¡y láº§n 2]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NGÃ€Y 8+: Báº¯t Ä‘áº§u tráº¥n lá»™t                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  StreetScene                                                               â”‚
â”‚  â””â†’ NhÃ³m báº¯t náº¡t Ä‘Ã²i tiá»n                                                 â”‚
â”‚       â†“                                                                    â”‚
â”‚  ğŸ”´ CHOICE 3: [ÄÆ°a tiá»n] / [Tá»« chá»‘i] (â†’ bá»‹ Ä‘Ã¡nh)                          â”‚
â”‚       â†“                                                                    â”‚
â”‚  (VÃ²ng láº·p 2 ngÃ y/láº§n trong 1-2 tuáº§n)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NGÃ€Y CUá»I: Cao trÃ o                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  HomeScene (SÃ¡ng)                                                          â”‚
â”‚  â””â†’ Máº¹: "Chiá»u vá» sá»›m máº¹ cÃ³ chuyá»‡n muá»‘n nÃ³i"                              â”‚
â”‚       â†“                                                                    â”‚
â”‚  StreetScene (Chiá»u)                                                       â”‚
â”‚  â””â†’ Äá»©c Ä‘Æ°a tiá»n nhÆ°ng bá»‹ Ã©p chÆ¡i "TÃ¹ xÃ¬ báº¡t tai"                         â”‚
â”‚       â†“                                                                    â”‚
â”‚  ğŸ”´ ENDING BRANCH:                                                         â”‚
â”‚  â”œâ†’ [Báº­t láº¡i, solo 1-1] â†’ END 1: Tá»° Äá»¨NG LÃŠN (Good)                       â”‚
â”‚  â”œâ†’ [Vá» nhÃ , thÃº nháº­n] â†’ END 2: NHá»œ NGÆ¯á»œI Lá»šN (True)                      â”‚
â”‚  â””â†’ [Giáº¥u máº¹]                                                              â”‚
â”‚       â”œâ†’ [Mang dao] â†’ END 3: ÃN Máº NG (Bad)                                â”‚
â”‚       â””â†’ [KhÃ´ng mang] â†’ END 4: Tá»¬ VONG (Bad)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… TIáº¾N Äá»˜ THá»°C HIá»†N

| #      | Task                               | MÃ´ táº£                        | Status      |
| ------ | ---------------------------------- | ---------------------------- | ----------- |
| **1**  | **Táº¡o GameManager + StoryManager** | Core systems quáº£n lÃ½ game    | âœ… XONG     |
| **2**  | **Táº¡o HomeScene**                  | Map nhÃ  Äá»©c + NPCs           | ğŸ”„ ÄANG LÃ€M |
| **3**  | **Táº¡o StreetScene**                | Map Ä‘Æ°á»ng vá» + nhÃ³m báº¯t náº¡t  | â³ CHá»œ      |
| **4**  | **Táº¡o Scene Transition System**    | Door, SpawnPoint             | âœ… XONG     |
| **5**  | **NÃ¢ng cáº¥p DialogueData**          | ThÃªm conditions, story flags | âœ… XONG     |
| **6**  | **Táº¡o nhÃ¢n váº­t má»›i**               | Máº¹, CÃ´ giÃ¡o, NhÃ³m báº¯t náº¡t    | â³ CHá»œ      |
| **7**  | **Táº¡o Day System**                 | Quáº£n lÃ½ thá»i gian trong game | â³ CHá»œ      |
| **8**  | **Implement Ending Logic**         | 4 endings dá»±a trÃªn choices   | â³ CHá»œ      |
| **9**  | **TÃ¬m/Download Street Assets**     | Tileset cho Ä‘Æ°á»ng phá»‘        | â³ CHá»œ      |
| **10** | **Full implementation (1-8)**      | LÃ m táº¥t cáº£ theo thá»© tá»±       | ğŸ”„ ÄANG LÃ€M |

---

## ğŸ“š HÆ¯á»šNG DáºªN Sá»¬ Dá»¤NG CORE SYSTEMS

### 1. GameManager

```csharp
// Load scene vá»›i spawn point cá»¥ thá»ƒ
GameManager.Instance.LoadScene("HomeScene", "from_street");

// Kiá»ƒm tra scene hiá»‡n táº¡i
string currentScene = GameManager.Instance.GetCurrentSceneName();

// Pause/Resume game
GameManager.Instance.PauseGame();
GameManager.Instance.ResumeGame();
```

### 2. StoryManager

```csharp
// Set/Get story flags
StoryManager.Instance.SetFlag("met_bullies", true);
bool hasMet = StoryManager.Instance.GetFlag("met_bullies");

// Set/Get variables
StoryManager.Instance.SetVariable("money", 50000);
StoryManager.Instance.AddVariable("fear_level", 10);
int money = StoryManager.Instance.GetMoney();

// Day system
StoryManager.Instance.AdvanceDay(1);
int day = StoryManager.Instance.GetCurrentDay();

// Determine ending
StoryManager.EndingType ending = StoryManager.Instance.DetermineEnding();
```

### 3. SceneTransition (Door/Portal)

1. Táº¡o GameObject vá»›i Collider2D (Is Trigger = true)
2. Add component `SceneTransition`
3. Cáº¥u hÃ¬nh:
   - `Target Scene Name`: TÃªn scene Ä‘Ã­ch
   - `Target Spawn Point Id`: ID spawn point
   - `Mode`: OnTriggerEnter hoáº·c OnInteract (nháº¥n E)
   - `Required Flags`: Flags cáº§n cÃ³ Ä‘á»ƒ chuyá»ƒn scene
   - `Forbidden Flags`: Flags cáº¥m (khÃ´ng Ä‘Æ°á»£c cÃ³)

### 4. SpawnPoint

1. Táº¡o Empty GameObject táº¡i vá»‹ trÃ­ spawn
2. Add component `SpawnPoint`
3. Cáº¥u hÃ¬nh:

   - `Spawn Point Id`: ID duy nháº¥t (VD: "from_home", "from_school")
   - `Is Default Spawn`: ÄÃ¡nh dáº¥u lÃ  spawn máº·c Ä‘á»‹nh
   - `Facing Direction`: HÆ°á»›ng player nhÃ¬n khi spawn
   - `From Scene Name`: Scene nguá»“n (optional)

4. Add component `SpawnManager` vÃ o 1 GameObject trong scene

### 5. DialogueData vá»›i Conditions

```csharp
// Trong DialogueChoice:
requiredFlags = new string[] { "met_bullies" };     // Cáº§n cÃ³ flag nÃ y má»›i hiá»‡n choice
forbiddenFlags = new string[] { "got_beaten" };    // Náº¿u cÃ³ flag nÃ y thÃ¬ áº©n choice

// Variable conditions
variableConditions = new VariableCondition[] {
    new VariableCondition { variableName = "money", comparison = GreaterOrEqual, value = 10000 }
};

// Effects khi chá»n
setFlagsTrue = new string[] { "gave_money" };
variableChanges = new VariableChange[] {
    new VariableChange { variableName = "money", operation = Subtract, value = 10000 }
};
```

### 6. SaveManager

```csharp
// LÆ°u game
SaveManager.Instance.SaveGame();

// Load game
if (SaveManager.Instance.HasSaveFile())
{
    SaveManager.Instance.LoadGame();
}

// XÃ³a save
SaveManager.Instance.DeleteSave();
```

---

## ğŸ“ Cáº¤U TRÃšC FILES ÄÃƒ Táº O

```
Assets/Scripts/
â”œâ”€â”€ GameManager.cs          â† Singleton quáº£n lÃ½ game state
â”œâ”€â”€ StoryManager.cs         â† Quáº£n lÃ½ story flags/variables
â”œâ”€â”€ SerializableDictionary.cs â† Dictionary serialize Ä‘Æ°á»£c
â”œâ”€â”€ SceneTransition.cs      â† Component Door/Portal
â”œâ”€â”€ SpawnPoint.cs           â† SpawnPoint + SpawnManager
â”œâ”€â”€ DialogueData.cs         â† ÄÃ£ nÃ¢ng cáº¥p vá»›i conditions
â”œâ”€â”€ SaveManager.cs          â† LÆ°u/Load game
â””â”€â”€ SaveData.cs             â† Cáº¥u trÃºc data lÆ°u game
```
